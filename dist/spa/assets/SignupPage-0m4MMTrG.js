import{a as E,Q as q}from"./QInput-Bo629G8r.js";import{Q as F}from"./QFile-D6gKZUJp.js";import{Q as N,h as R}from"./QIcon-BhUrjT6E.js";import{c as A,h as b,a as B,r as p,B as j,C as M,o as O,g as T,z as Q,d as D,E as L,_ as $,S as w,K as P,R as k,O as m,L as z,$ as H,Q as K}from"./index-B5SxcLKG.js";import{u as J,a as G,b as W}from"./use-checkbox-BGCWFVqj.js";import{a as X,Q as U}from"./QBtn--jiCy6NF.js";import"./use-dark-qhZxCWy-.js";import"./private.use-form-Cup8av6d.js";const Y=()=>b("div",{key:"svg",class:"q-checkbox__bg absolute"},[b("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[b("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),b("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Z=A({name:"QCheckbox",props:G,emits:J,setup(n){const f=Y();function r(d,l){const a=B(()=>(d.value===!0?n.checkedIcon:l.value===!0?n.indeterminateIcon:n.uncheckedIcon)||null);return()=>a.value!==null?[b("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[b(N,{class:"q-checkbox__icon",name:a.value})])]:[f]}return W("checkbox",r)}}),ee=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(n,{slots:f,emit:r}){const d=T(),l=p(null);let a=0;const s=[];function x(e){const v=typeof e=="boolean"?e:n.noErrorFocus!==!0,V=++a,S=(o,u)=>{r(`validation${o===!0?"Success":"Error"}`,u)},C=o=>{const u=o.validate();return typeof u.then=="function"?u.then(c=>({valid:c,comp:o}),c=>({valid:!1,comp:o,err:c})):Promise.resolve({valid:u,comp:o})};return(n.greedy===!0?Promise.all(s.map(C)).then(o=>o.filter(u=>u.valid!==!0)):s.reduce((o,u)=>o.then(()=>C(u).then(c=>{if(c.valid===!1)return Promise.reject(c)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return V===a&&S(!0),!0;if(V===a){const{comp:u,err:c}=o[0];if(c!==void 0&&console.error(c),S(!1,u),v===!0){const _=o.find(({comp:I})=>typeof I.focus=="function"&&X(I.$)===!1);_!==void 0&&_.comp.focus()}}return!1})}function g(){a++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function h(e){e!==void 0&&Q(e);const v=a+1;x().then(V=>{v===a&&V===!0&&(n.onSubmit!==void 0?r("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function y(e){e!==void 0&&Q(e),r("reset"),D(()=>{g(),n.autofocus===!0&&n.noResetFocus!==!0&&i()})}function i(){E(()=>{if(l.value===null)return;const e=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1);e?.focus({preventScroll:!0})})}L($,{bindComponent(e){s.push(e)},unbindComponent(e){const v=s.indexOf(e);v!==-1&&s.splice(v,1)}});let t=!1;return j(()=>{t=!0}),M(()=>{t===!0&&n.autofocus===!0&&i()}),O(()=>{n.autofocus===!0&&i()}),Object.assign(d.proxy,{validate:x,resetValidation:g,submit:h,reset:y,focus:i,getValidationComponents:()=>s}),()=>b("form",{class:"q-form",ref:l,onSubmit:h,onReset:y},R(f.default))}}),te={class:"text-primary text-center q-pa-md flex flex-center"},oe={key:0,class:"q-mt-md"},ae=["src"],le={key:1,class:"q-mt-md",style:{"max-width":"200px","max-height":"200px",border:"2px dashed #ccc",display:"flex","justify-content":"center","align-items":"center","font-size":"14px",color:"#aaa"}},se={class:"text-h6",style:{opacity:".4"}},pe={__name:"SignupPage",setup(n){const f=p(""),r=p(""),d=p(""),l=p(""),a=p(!1),s=p(null),x=p(null),g=B(()=>r.value!==d.value),h=()=>{if(!g.value){console.log({email:f.value,password:r.value,passwordConfirm:d.value,username:l.value,termsAccepted:a.value,profilePicture:s.value});var i={email:f.value,password:r.value,passwordConfirm:d.value,username:l.value,termsAccepted:a.value,profilePicture:s.value};fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>t.json()).then(t=>{console.log("Signup successful:",t)}).catch(t=>{console.error("Signup error:",t)})}},y=()=>{const i=s.value?.[0];if(i){const t=new FileReader;t.onload=e=>{x.value=e.target.result},t.readAsDataURL(i)}};return(i,t)=>(P(),w("div",te,[k("div",null,[t[7]||(t[7]=k("div",{class:"text-h5"},"Signup Page",-1)),m(ee,{class:"q-gutter-md signup-form",onSubmit:H(h,["prevent"])},{default:z(()=>[m(q,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),label:"Username",filled:"",required:""},null,8,["modelValue"]),m(F,{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),label:"Upload Profile Picture",filled:"",accept:"image/*","max-files":1,onAdded:y},null,8,["modelValue"]),x.value?(P(),w("div",oe,[k("img",{src:x.value,alt:"Profile Preview",class:"q-mb-md",style:{"max-width":"200px","max-height":"200px","object-fit":"cover"}},null,8,ae)])):(P(),w("div",le," No Image Uploaded ")),m(q,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),label:"Email Address",type:"email",filled:"",required:""},null,8,["modelValue"]),m(q,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),label:"Password",type:"password",filled:"",required:""},null,8,["modelValue"]),m(q,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),label:"Confirm Password",type:"password",filled:"",required:"",error:g.value,"error-message":"Passwords do not match"},null,8,["modelValue","error"]),m(Z,{modelValue:a.value,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value=e),label:"I agree to the Terms of Use",required:""},null,8,["modelValue"]),m(U,{label:"Sign Up",color:"primary",type:"submit",unelevated:"",class:"q-mt-md"})]),_:1}),k("div",se,[t[6]||(t[6]=K(" Already have an account? ")),m(U,{flat:"",to:"/profile",label:"Login"})])])]))}};export{pe as default};
