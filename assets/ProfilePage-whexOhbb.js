import{a as B,Q as _,_ as U,c as A,b as i}from"./agos-profile-BPTNwE4I.js";import{Q as r}from"./QItem-DSlCIb9g.js";import{Q as S}from"./QSeparator-CrWo0nHH.js";import{Q as L}from"./QInput-D_MRFhDT.js";import{Q as b,R as x}from"./QBtn-Cuz6GeVn.js";import{Q as N}from"./QFile--y01fihD.js";import{Q as v}from"./QIcon-C5UeeBWb.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as k,K as t,O as l,L as a,r as n,o as j,V as d,T as Q,R as u,k as P,U as O,J as m,W as C,Q as V}from"./index-Dxh9G3kF.js";import"./use-dark-Dddl6uUp.js";import"./private.use-form-owtYE6nQ.js";const R={setup(){const c=n([{username:"Ágoston",userId:1,email:"agoston@email.com",picture:"../assets/agos-profile.jpeg",token:"password"}]),e=n(!0),I=n(""),o=n(!1),f=n(""),g=n("");j(()=>{e.value=localStorage.getItem("isLoggedIn")==="true",I.value=localStorage.getItem("loggedInId")});const s=async()=>{if(f.value&&g.value){const E={email:f.value,password:g.value};try{const p=await fetch("https://vibemapbe.com/auth/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(p.ok){e.value=!0,localStorage.setItem("isLoggedIn","true");const q=await p.json();console.log(q)}else console.error("Login failed",p.responseText)}catch(p){console.error("Error during login",p)}}else console.error("Email and password are required")},w=()=>{e.value=!1,localStorage.setItem("isLoggedIn","false"),localStorage.setItem("loggedInId",null),f.value="",g.value="",y()},y=()=>{location.reload()};return{login:s,logout:w,editProfile:()=>{o.value=!0,console.log(o.value)},saveProfile:()=>{o.value=!1,console.log(o.value)},profileEdit:o,email:f,password:g,isLoggedIn:e,loggedInId:I,userInfo:c}}},z={class:"text-primary text-center q-pa-md flex flex-center w-100"},D={class:"q-mt-md text-h6"},F={class:"text-caption text-grey"};function J(c,e,I,o,f,g){return t(),k("div",z,[l(B,{class:"w-100"},{default:a(()=>[o.isLoggedIn?d("",!0):(t(),k(Q,{key:0},[l(r,{class:"q-pa-md column items-center w-100"},{default:a(()=>[l(_,{size:"72px"},{default:a(()=>e[3]||(e[3]=[u("img",{src:U,alt:"User Avatar"},null,-1)])),_:1}),e[4]||(e[4]=u("div",{class:"q-mt-md text-h6"},"Welcome",-1)),e[5]||(e[5]=u("div",{class:"text-caption text-grey"},"Please login or sign up",-1))]),_:1}),l(S),l(r,{class:"w-100"},{default:a(()=>[l(L,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),label:"Email",type:"email",filled:"",class:"full-width"},null,8,["modelValue"])]),_:1}),l(r,{class:"w-100"},{default:a(()=>[l(L,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),label:"Password",type:"password",filled:"",class:"full-width"},null,8,["modelValue"])]),_:1}),l(r,{class:"q-gutter-sm w-100"},{default:a(()=>[l(b,{label:"Login",color:"primary",class:"col-6",onClick:o.login},null,8,["onClick"]),l(b,{label:"Signup",color:"secondary",outline:"",class:"col-6",to:"./signup"})]),_:1})],64)),o.isLoggedIn?(t(),k(Q,{key:1},[(t(!0),k(Q,null,O(o.userInfo,(s,w)=>(t(),m(r,{class:"q-pa-md column items-center w-100",key:w},{default:a(()=>[l(_,{size:"160px"},{default:a(()=>[e[6]||(e[6]=u("img",{src:A,alt:"User Avatar"},null,-1)),o.profileEdit?(t(),m(N,{key:0,class:"picture-edit",modelValue:c.profilePicture,"onUpdate:modelValue":e[2]||(e[2]=y=>c.profilePicture=y),filled:"",accept:"image/*","max-files":1,onAdded:c.previewImage},null,8,["modelValue","onAdded"])):d("",!0),o.profileEdit?(t(),m(v,{key:1,class:"picture-edit-icon",name:"edit"})):d("",!0)]),_:1}),u("div",D,C(s.username),1),u("div",F,C(s.email),1)]),_:2},1024))),128)),l(S),o.profileEdit?d("",!0):P((t(),m(r,{key:0,clickable:"",class:"",onClick:o.editProfile},{default:a(()=>[l(i,{avatar:""},{default:a(()=>[l(v,{name:"edit"})]),_:1}),l(i,null,{default:a(()=>e[7]||(e[7]=[V("Edit profile")])),_:1})]),_:1},8,["onClick"])),[[x]]),o.profileEdit?P((t(),m(r,{key:1,clickable:"",class:"",onClick:o.saveProfile},{default:a(()=>[l(i,{avatar:""},{default:a(()=>[l(v,{name:"save"})]),_:1}),l(i,null,{default:a(()=>e[8]||(e[8]=[V("Save profile")])),_:1})]),_:1},8,["onClick"])),[[x]]):d("",!0),P((t(),m(r,{clickable:"",class:"text-red",onClick:o.logout},{default:a(()=>[l(i,{avatar:""},{default:a(()=>[l(v,{name:"logout",color:"red"})]),_:1}),l(i,null,{default:a(()=>e[9]||(e[9]=[V("Logout")])),_:1})]),_:1},8,["onClick"])),[[x]])],64)):d("",!0)]),_:1})])}const ae=T(R,[["render",J]]);export{ae as default};
