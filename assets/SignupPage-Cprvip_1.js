import{a as F,Q as S}from"./QInput-BP2ywcBK.js";import{Q as B}from"./QFile-4G2zWRlJ.js";import{Q as R,h as N}from"./QIcon-CicTorvX.js";import{c as A,h as g,a as E,r as p,B as T,C as j,o as M,g as D,z as _,d as L,E as O,$,T as k,K as P,R as q,Q as m,L as z,a0 as H,S as K,M as J}from"./index-DtKDrAO9.js";import{u as G,a as W,b as X}from"./use-checkbox-jGE-at5W.js";import{a as Y,Q}from"./QBtn-DF0sZ9i4.js";import"./use-dark-AL4SM1h8.js";import"./private.use-form-DhgTpj1h.js";const Z=()=>g("div",{key:"svg",class:"q-checkbox__bg absolute"},[g("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[g("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),g("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),ee=A({name:"QCheckbox",props:W,emits:G,setup(n){const f=Z();function r(v,l){const s=E(()=>(v.value===!0?n.checkedIcon:l.value===!0?n.indeterminateIcon:n.uncheckedIcon)||null);return()=>s.value!==null?[g("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[g(R,{class:"q-checkbox__icon",name:s.value})])]:[f]}return X("checkbox",r)}}),oe=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(n,{slots:f,emit:r}){const v=D(),l=p(null);let s=0;const d=[];function u(o){const e=typeof o=="boolean"?o:n.noErrorFocus!==!0,t=++s,w=(a,i)=>{r(`validation${a===!0?"Success":"Error"}`,i)},C=a=>{const i=a.validate();return typeof i.then=="function"?i.then(c=>({valid:c,comp:a}),c=>({valid:!1,comp:a,err:c})):Promise.resolve({valid:i,comp:a})};return(n.greedy===!0?Promise.all(d.map(C)).then(a=>a.filter(i=>i.valid!==!0)):d.reduce((a,i)=>a.then(()=>C(i).then(c=>{if(c.valid===!1)return Promise.reject(c)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return t===s&&w(!0),!0;if(t===s){const{comp:i,err:c}=a[0];if(c!==void 0&&console.error(c),w(!1,i),e===!0){const I=a.find(({comp:U})=>typeof U.focus=="function"&&Y(U.$)===!1);I!==void 0&&I.comp.focus()}}return!1})}function x(){s++,d.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function h(o){o!==void 0&&_(o);const e=s+1;u().then(t=>{e===s&&t===!0&&(n.onSubmit!==void 0?r("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function y(o){o!==void 0&&_(o),r("reset"),L(()=>{x(),n.autofocus===!0&&n.noResetFocus!==!0&&b()})}function b(){F(()=>{if(l.value===null)return;const o=l.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||l.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||l.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(l.value.querySelectorAll("[tabindex]"),e=>e.tabIndex!==-1);o?.focus({preventScroll:!0})})}O($,{bindComponent(o){d.push(o)},unbindComponent(o){const e=d.indexOf(o);e!==-1&&d.splice(e,1)}});let V=!1;return T(()=>{V=!0}),j(()=>{V===!0&&n.autofocus===!0&&b()}),M(()=>{n.autofocus===!0&&b()}),Object.assign(v.proxy,{validate:u,resetValidation:x,submit:h,reset:y,focus:b,getValidationComponents:()=>d}),()=>g("form",{class:"q-form",ref:l,onSubmit:h,onReset:y},N(f.default))}}),te={class:"text-primary text-center q-pa-md flex flex-center"},ae={key:0,class:"q-mt-md"},le=["src"],se={key:1,class:"q-mt-md",style:{"max-width":"200px","max-height":"200px",border:"2px dashed #ccc",display:"flex","justify-content":"center","align-items":"center","font-size":"14px",color:"#aaa"}},ne={class:"text-h6",style:{opacity:".4"}},re="",be={__name:"SignupPage",setup(n){const f=p(""),r=p(""),v=p(""),l=p(""),s=p(!1),d=p(null),u=p(null),x=E(()=>r.value!==v.value),h=J(),y=o=>{if(o){const e=new FileReader;e.onload=t=>{u.value=t.target.result},e.readAsDataURL(o)}else u.value=""},b=()=>{u.value&&(localStorage.setItem("uploadedImage",u.value),console.log("Image saved to local storage."))},V=()=>{if(!x.value){console.log({email:f.value,password:r.value,passwordConfirm:v.value,username:l.value,termsAccepted:s.value,profilePicture:u.value});var o={email:f.value,password:r.value,username:l.value,profilePicture:u.value};fetch("https://vibemapbe.com/auth/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{re.status!=200?(alert(e),h.push("/profile")):(console.log("Signup successful:",e),h.push("/"),b())}).catch(e=>{console.error("Signup error:",e),alert("Signup failed. Please try again. Error: "+e)})}};return(o,e)=>(P(),k("div",te,[q("div",null,[e[7]||(e[7]=q("div",{class:"text-h5"},"Signup Page",-1)),m(oe,{class:"q-gutter-md signup-form",onSubmit:H(V,["prevent"])},{default:z(()=>[m(S,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),label:"Username",filled:"",required:""},null,8,["modelValue"]),m(B,{modelValue:d.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>d.value=t),y],label:"Upload Profile Picture",filled:"",accept:"image/*","max-files":1,onAdded:o.previewImage},null,8,["modelValue","onAdded"]),u.value?(P(),k("div",ae,[q("img",{src:u.value,alt:"Profile Preview",class:"q-mb-md",style:{"max-width":"200px","max-height":"200px","object-fit":"cover"}},null,8,le)])):(P(),k("div",se," No Image Uploaded ")),m(S,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),label:"Email Address",type:"email",filled:"",required:""},null,8,["modelValue"]),m(S,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),label:"Password",type:"password",filled:"",required:""},null,8,["modelValue"]),m(S,{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=t=>v.value=t),label:"Confirm Password",type:"password",filled:"",required:"",error:x.value,"error-message":"Passwords do not match"},null,8,["modelValue","error"]),m(ee,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value=t),label:"I agree to the Terms of Use",required:""},null,8,["modelValue"]),m(Q,{label:"Sign Up",color:"primary",type:"submit",unelevated:"",class:"q-mt-md"})]),_:1}),q("div",ne,[e[6]||(e[6]=K(" Already have an account? ")),m(Q,{flat:"",to:"/profile",label:"Login"})])])]))}};export{be as default};
