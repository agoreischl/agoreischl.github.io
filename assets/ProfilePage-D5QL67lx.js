import{a as H,Q as b,_ as G,b as p}from"./vibemap-logo-BIytLqFg.js";import{Q as n}from"./QItem-Cy7LiBfo.js";import{Q as E}from"./QSeparator-BiMw4zbM.js";import{Q as x}from"./QInput-B7IGy7Ox.js";import{Q as L,R as h}from"./QBtn-IRcrPKH_.js";import{Q as F}from"./QFile-CpvHy_ii.js";import{Q as y}from"./QIcon-DnBLJjUc.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as I,K as s,O as l,L as a,r as d,o as J,V as A,T as B,R as v,k as Q,U as O,J as k,W as S,Q as V}from"./index-sQrvHyK5.js";import"./use-dark-zJsvcIP1.js";import"./private.use-form-BVholY-_.js";const q={setup(){const i=d([{username:"User",userId:1,email:"email@email.com",picture:"data:image/png;base64,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",token:"password"}]),e=d(null),u=d(!0),o=d(""),m=d(!1),g=d(""),r=d(""),f=d("");J(()=>{u.value=localStorage.getItem("isLoggedIn")==="true",o.value=localStorage.getItem("loggedInId"),f.value=localStorage.getItem("usertoken"),console.log(u.value),console.log(f.value),C(f.value)});const C=async w=>{console.log(w);try{const t=await fetch("https://vibemapbe.com/auth/auth/me",{method:"GET",headers:{Authorization:`Bearer ${w}`}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const c=await t.json();i.value[0]={...i.value[0],username:c.email,email:c.email,userId:c.id,token:w},console.log(i.value[0])}catch(t){e.value=t.message||"Failed to fetch user data"}},P=async()=>{if(g.value&&r.value){const w={email:g.value,password:r.value};try{const t=await fetch("https://vibemapbe.com/auth/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(t.ok){u.value=!0,localStorage.setItem("isLoggedIn","true");const c=await t.json();console.log(c),f.value=c.access_token,localStorage.setItem("usertoken",c.access_token),this.$router.push("/"),alert("Login successful! Welcome back "+g.value)}else console.error("Login failed",t.responseText),alert("Login failed",t.responseText)}catch(t){console.error("Error during login",t)}}else console.error("Email and password are required"),alert("Email and password are required")},T=()=>{u.value=!1,localStorage.setItem("isLoggedIn","false"),localStorage.setItem("loggedInId",null),g.value="",r.value="",Z()},Z=()=>{location.reload()};return{login:P,logout:T,editProfile:()=>{m.value=!0,console.log(m.value)},saveProfile:()=>{m.value=!1,console.log(m.value)},profileEdit:m,email:g,password:r,isLoggedIn:u,loggedInId:o,userInfo:i}}},D={class:"text-primary text-center q-pa-md flex flex-center w-100"},K={class:"q-mt-md text-h6"},N={class:"text-caption text-grey"};function X(i,e,u,o,m,g){return s(),I("div",D,[l(H,{class:"w-100"},{default:a(()=>[o.isLoggedIn?A("",!0):(s(),I(B,{key:0},[l(n,{class:"q-pa-md column items-center w-100"},{default:a(()=>[l(b,{size:"72px"},{default:a(()=>e[3]||(e[3]=[v("img",{src:G,alt:"User Avatar"},null,-1)])),_:1}),e[4]||(e[4]=v("div",{class:"q-mt-md text-h6"},"Welcome",-1)),e[5]||(e[5]=v("div",{class:"text-caption text-grey"},"Please login or sign up",-1))]),_:1}),l(E),l(n,{class:"w-100"},{default:a(()=>[l(x,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),label:"Email",type:"email",filled:"",class:"full-width"},null,8,["modelValue"])]),_:1}),l(n,{class:"w-100"},{default:a(()=>[l(x,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),label:"Password",type:"password",filled:"",class:"full-width"},null,8,["modelValue"])]),_:1}),l(n,{class:"q-gutter-sm w-100"},{default:a(()=>[l(L,{label:"Login",color:"primary",class:"col-6",onClick:o.login},null,8,["onClick"]),l(L,{label:"Signup",color:"secondary",outline:"",class:"col-6",to:"./signup"})]),_:1})],64)),o.isLoggedIn?(s(),I(B,{key:1},[(s(!0),I(B,null,O(o.userInfo,(r,f)=>(s(),k(n,{class:"q-pa-md column items-center w-100",key:f},{default:a(()=>[l(b,{size:"160px"},{default:a(()=>[e[6]||(e[6]=v("img",{src:"{{ userInfo.picture }}",alt:"User Avatar"},null,-1)),o.profileEdit?(s(),k(F,{key:0,class:"picture-edit",modelValue:i.profilePicture,"onUpdate:modelValue":e[2]||(e[2]=C=>i.profilePicture=C),filled:"",accept:"image/*","max-files":1,onAdded:i.previewImage},null,8,["modelValue","onAdded"])):A("",!0),o.profileEdit?(s(),k(y,{key:1,class:"picture-edit-icon",name:"edit"})):A("",!0)]),_:1}),v("div",K,S(r.username),1),v("div",N,S(r.email),1)]),_:2},1024))),128)),l(E),o.profileEdit?A("",!0):Q((s(),k(n,{key:0,clickable:"",class:"",onClick:o.editProfile},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(y,{name:"edit"})]),_:1}),l(p,null,{default:a(()=>e[7]||(e[7]=[V("Edit profile")])),_:1})]),_:1},8,["onClick"])),[[h]]),o.profileEdit?Q((s(),k(n,{key:1,clickable:"",class:"",onClick:o.saveProfile},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(y,{name:"save"})]),_:1}),l(p,null,{default:a(()=>e[8]||(e[8]=[V("Save profile")])),_:1})]),_:1},8,["onClick"])),[[h]]):A("",!0),Q((s(),k(n,{clickable:"",class:"text-red",onClick:o.logout},{default:a(()=>[l(p,{avatar:""},{default:a(()=>[l(y,{name:"logout",color:"red"})]),_:1}),l(p,null,{default:a(()=>e[9]||(e[9]=[V("Logout")])),_:1})]),_:1},8,["onClick"])),[[h]])],64)):A("",!0)]),_:1})])}const re=U(q,[["render",X]]);export{re as default};
