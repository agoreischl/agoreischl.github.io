import{Q as B,a as k}from"./QCard-DlTk3zyl.js";import{Q as h}from"./QBtn-BUOygh7X.js";import{Q as T}from"./QItem-BxVIiIDW.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as p,K as g,W as E,R as r,U as b,V as R,Q as c,L as m,r as l,o as x,J as Z,X as y,Y as D}from"./index-CyKwBtjd.js";import"./QIcon-DRk1KO-0.js";import"./use-dark-bo_hQOQP.js";const L={setup(){const C=l([]),o=l([]),d=l(""),s=l([]),f=l([{username:"User",userId:d.value,email:"email@email.com",picture:"data:image/png;base64,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",token:"password"}]),w=l(null),n=l(""),u=async()=>{try{var e=await fetch(`https://vibemapbe.com/location/location/locations/user/${d.value}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.value}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const a=(await e.json()).map(i=>({id:i.id,stress_level:Math.round(i.stress_level),comment:i.comment,latitude:Number(i.latitude),longitude:Number(i.longitude)}));o.value=a,console.log(o.value)}catch(t){console.error("Error fetching data:",t)}};x(async()=>{n.value=localStorage.getItem("usertoken"),d.value=Number(localStorage.getItem("loggedInId")),await A(n.value),await u(),setTimeout(()=>{G()},1)});const A=async e=>{console.log(e);try{const t=await fetch("https://vibemapbe.com/auth/auth/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const a=await t.json();f.value[0]={...f.value[0],username:a.email,email:a.email,userId:a.id,token:e}}catch(t){w.value=t.message||"Failed to fetch user data"}};function G(){if(window.google&&window.google.maps){v();return}const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY",e.async=!0,e.defer=!0,e.onload=v,document.head.appendChild(e)}function v(){s.value.forEach((e,t)=>{const a=o.value[t],i=new window.google.maps.Map(e,{center:{lat:a.latitude,lng:a.longitude},zoom:14,mapTypeControl:!1,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1});new window.google.maps.Marker({position:{lat:a.latitude,lng:a.longitude},map:i,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#2C6E49",fillOpacity:1,strokeWeight:2,strokeColor:"#ffffff"}})})}function H(e){return["sentiment_very_dissatisfied","sentiment_dissatisfied","sentiment_satisfied","sentiment_very_satisfied"][e-1]||""}function Q(e){return["red","orange","green","green-9"][e-1]||""}const I=l();return x(()=>{I.value=localStorage.getItem("isLoggedIn")}),{ratings:C,responses:o,mapElements:s,getRatingIcon:H,getRatingColor:Q,isLoggedIn:I,loggedInId:d}}},S={key:0,class:"text-primary text-center q-pa-md flex flex-center w-100"},M={class:"rate-card-cont"},F={class:"rate-details"},K={class:"rate-date"},N={class:"rate"},X={class:"rate-reason"},z={key:1,class:"text-primary text-center q-pa-md flex flex-center w-100"};function J(C,o,d,s,f,w){return g(),p(b,null,[s.isLoggedIn?(g(),p("div",S,[o[0]||(o[0]=r("div",{class:"text-h6"},"My ratings",-1)),r("div",M,[(g(!0),p(b,null,R(s.responses,(n,u)=>(g(),Z(B,{key:u,class:"myratings-card"},{default:m(()=>[c(k,{class:"myratings-card-inner"},{default:m(()=>[r("div",{class:"map-elem",ref_for:!0,ref:A=>s.mapElements[u]=A},null,512),r("div",F,[r("div",K," Rating ID: "+y(n.id),1),r("div",N,[r("span",{class:"material-icons",style:D({color:s.getRatingColor(n.stress_level)})},y(s.getRatingIcon(n.stress_level)),5)]),r("div",X,y(n.comment),1)])]),_:2},1024)]),_:2},1024))),128))])])):E("",!0),s.isLoggedIn?E("",!0):(g(),p("div",z,[c(B,null,{default:m(()=>[c(k,null,{default:m(()=>[o[1]||(o[1]=r("div",{class:"text-h7"},"Please sign up or log in to be able to rate your location.",-1)),c(T,{class:"q-gutter-sm w-100"},{default:m(()=>[c(h,{label:"Login",color:"primary",class:"col-6",to:"/profile"}),c(h,{label:"Signup",color:"secondary",outline:"",class:"col-6",to:"./signup"})]),_:1})]),_:1})]),_:1}),c(h,{class:"q-mt-xl text-primary",unelevated:"",to:"/",label:"Go Home","no-caps":""})]))],64)}const _=V(L,[["render",J]]);export{_ as default};
