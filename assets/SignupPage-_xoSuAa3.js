import{a as E,Q as q}from"./QInput-D_MRFhDT.js";import{Q as F}from"./QFile--y01fihD.js";import{Q as N,h as R}from"./QIcon-C5UeeBWb.js";import{c as A,h as b,a as B,r as p,B as j,C as M,o as O,g as T,z as Q,d as D,E as L,_ as $,S as w,K as P,R as k,O as c,L as z,$ as H,Q as K}from"./index-Dxh9G3kF.js";import{u as J,a as G,b as W}from"./use-checkbox-D7LTOC2X.js";import{a as X,Q as U}from"./QBtn-Cuz6GeVn.js";import"./use-dark-Dddl6uUp.js";import"./private.use-form-owtYE6nQ.js";const Y=()=>b("div",{key:"svg",class:"q-checkbox__bg absolute"},[b("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[b("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),b("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Z=A({name:"QCheckbox",props:G,emits:J,setup(l){const m=Y();function r(f,s){const a=B(()=>(f.value===!0?l.checkedIcon:s.value===!0?l.indeterminateIcon:l.uncheckedIcon)||null);return()=>a.value!==null?[b("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[b(N,{class:"q-checkbox__icon",name:a.value})])]:[m]}return W("checkbox",r)}}),ee=A({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(l,{slots:m,emit:r}){const f=T(),s=p(null);let a=0;const n=[];function x(e){const v=typeof e=="boolean"?e:l.noErrorFocus!==!0,V=++a,S=(o,u)=>{r(`validation${o===!0?"Success":"Error"}`,u)},C=o=>{const u=o.validate();return typeof u.then=="function"?u.then(d=>({valid:d,comp:o}),d=>({valid:!1,comp:o,err:d})):Promise.resolve({valid:u,comp:o})};return(l.greedy===!0?Promise.all(n.map(C)).then(o=>o.filter(u=>u.valid!==!0)):n.reduce((o,u)=>o.then(()=>C(u).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return V===a&&S(!0),!0;if(V===a){const{comp:u,err:d}=o[0];if(d!==void 0&&console.error(d),S(!1,u),v===!0){const _=o.find(({comp:I})=>typeof I.focus=="function"&&X(I.$)===!1);_!==void 0&&_.comp.focus()}}return!1})}function g(){a++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function h(e){e!==void 0&&Q(e);const v=a+1;x().then(V=>{v===a&&V===!0&&(l.onSubmit!==void 0?r("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function y(e){e!==void 0&&Q(e),r("reset"),D(()=>{g(),l.autofocus===!0&&l.noResetFocus!==!0&&i()})}function i(){E(()=>{if(s.value===null)return;const e=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),v=>v.tabIndex!==-1);e?.focus({preventScroll:!0})})}L($,{bindComponent(e){n.push(e)},unbindComponent(e){const v=n.indexOf(e);v!==-1&&n.splice(v,1)}});let t=!1;return j(()=>{t=!0}),M(()=>{t===!0&&l.autofocus===!0&&i()}),O(()=>{l.autofocus===!0&&i()}),Object.assign(f.proxy,{validate:x,resetValidation:g,submit:h,reset:y,focus:i,getValidationComponents:()=>n}),()=>b("form",{class:"q-form",ref:s,onSubmit:h,onReset:y},R(m.default))}}),te={class:"text-primary text-center q-pa-md flex flex-center"},oe={key:0,class:"q-mt-md"},ae=["src"],le={key:1,class:"q-mt-md",style:{"max-width":"200px","max-height":"200px",border:"2px dashed #ccc",display:"flex","justify-content":"center","align-items":"center","font-size":"14px",color:"#aaa"}},se={class:"text-h6",style:{opacity:".4"}},pe={__name:"SignupPage",setup(l){const m=p(""),r=p(""),f=p(""),s=p(""),a=p(!1),n=p(null),x=p(null),g=B(()=>r.value!==f.value),h=()=>{if(!g.value){console.log({email:m.value,password:r.value,passwordConfirm:f.value,username:s.value,termsAccepted:a.value,profilePicture:n.value});var i={email:m.value,password:r.value};fetch("https://vibemapbe.com/auth/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(t=>t.json()).then(t=>{console.log("Signup successful:",t)}).catch(t=>{console.error("Signup error:",t)})}},y=()=>{const i=n.value?.[0];if(i){const t=new FileReader;t.onload=e=>{x.value=e.target.result},t.readAsDataURL(i)}};return(i,t)=>(P(),w("div",te,[k("div",null,[t[7]||(t[7]=k("div",{class:"text-h5"},"Signup Page",-1)),c(ee,{class:"q-gutter-md signup-form",onSubmit:H(h,["prevent"])},{default:z(()=>[c(q,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),label:"Username",filled:"",required:""},null,8,["modelValue"]),c(F,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),label:"Upload Profile Picture",filled:"",accept:"image/*","max-files":1,onAdded:y},null,8,["modelValue"]),x.value?(P(),w("div",oe,[k("img",{src:x.value,alt:"Profile Preview",class:"q-mb-md",style:{"max-width":"200px","max-height":"200px","object-fit":"cover"}},null,8,ae)])):(P(),w("div",le," No Image Uploaded ")),c(q,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),label:"Email Address",type:"email",filled:"",required:""},null,8,["modelValue"]),c(q,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),label:"Password",type:"password",filled:"",required:""},null,8,["modelValue"]),c(q,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),label:"Confirm Password",type:"password",filled:"",required:"",error:g.value,"error-message":"Passwords do not match"},null,8,["modelValue","error"]),c(Z,{modelValue:a.value,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value=e),label:"I agree to the Terms of Use",required:""},null,8,["modelValue"]),c(U,{label:"Sign Up",color:"primary",type:"submit",unelevated:"",class:"q-mt-md"})]),_:1}),k("div",se,[t[6]||(t[6]=K(" Already have an account? ")),c(U,{flat:"",to:"/profile",label:"Login"})])])]))}};export{pe as default};
