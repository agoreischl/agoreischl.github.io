import{Q as w,a as v}from"./QCard-BP9jk9Ws.js";import{Q as A}from"./QBtn-zRGmiDmC.js";import{Q}from"./QItem-aQDyZkCZ.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as p,K as c,V as B,R as l,T as k,U as L,O as n,L as g,r,e as R,o as b,J as O,W as h,X as T}from"./index-5y7mXbhn.js";import"./QIcon-BbahrHL7.js";import"./use-dark-CzFagiZ1.js";const F={setup(){const y=r([{date:"19-02-2025",value:4,reason:"Very calm neighbourhood, not a lot of people, no constructions nearby.",lat:52.477956,long:4.79707},{date:"18-02-2025",value:2,reason:"Lot of constructions nearby, can't relax.",lat:52.277956,long:4.99707},{date:"17-02-2025",value:1,reason:"I just hate life.",lat:52.377956,long:4.99707},{date:"17-02-2025",value:3,reason:"meh.",lat:52.377956,long:4.89707}]),i=[R("response")];console.log(i[0]._rawValue);const t=(localStorage.getItem("response")?JSON.parse(localStorage.getItem("response")):[])._rawValue;console.log(t);const u=r(""),f=r([]),o=r([{username:"User",userId:1,email:"email@email.com",picture:"data:image/png;base64,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",token:"password"}]),d=r(null),m=r("");b(()=>{setTimeout(()=>{x()},1),m.value=localStorage.getItem("usertoken"),u.value=Number(localStorage.getItem("loggedInId")),V(m.value)});const V=async e=>{console.log(e);try{const a=await fetch("https://vibemapbe.com/auth/auth/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);const s=await a.json();o.value[0]={...o.value[0],username:s.email,email:s.email,userId:s.id,token:e},localStorage.setItem("loggedInId",o.value[0].userId),console.log(o.value[0])}catch(a){d.value=a.message||"Failed to fetch user data"}};function x(){if(window.google&&window.google.maps){C();return}const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY",e.async=!0,e.defer=!0,e.onload=C,document.head.appendChild(e)}function C(){f.value.forEach((e,a)=>{const s=t[a],H=new window.google.maps.Map(e,{center:{lat:s.latitude,lng:s.longitude},zoom:14,mapTypeControl:!1,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1});new window.google.maps.Marker({position:{lat:s.latitude,lng:s.longitude},map:H,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#2C6E49",fillOpacity:1,strokeWeight:2,strokeColor:"#ffffff"}})})}function S(e){return["sentiment_very_dissatisfied","sentiment_dissatisfied","sentiment_satisfied","sentiment_very_satisfied"][e-1]||""}function G(e){return["red","orange","green","green-9"][e-1]||""}const I=r(!0);return b(()=>{I.value=localStorage.getItem("isLoggedIn")==="true"}),{ratings:y,responses:t,mapElements:f,getRatingIcon:S,getRatingColor:G,isLoggedIn:I,loggedInId:u}}},J={key:0,class:"text-primary text-center q-pa-md flex flex-center w-100"},K={class:"rate-details"},M={class:"rate-date"},X={class:"rate"},D={class:"rate-reason"},N={key:1,class:"text-primary text-center q-pa-md flex flex-center w-100"};function z(y,i,E,t,u,f){return c(),p(k,null,[t.isLoggedIn?(c(),p("div",J,[i[0]||(i[0]=l("div",{class:"text-h6"},"My ratings",-1)),(c(!0),p(k,null,L(t.responses.filter(o=>o.userId===t.loggedInId),(o,d)=>(c(),O(w,{key:d,class:"myratings-card"},{default:g(()=>[n(v,{class:"myratings-card-inner"},{default:g(()=>[l("div",{class:"map-elem",ref_for:!0,ref:m=>t.mapElements[d]=m},null,512),l("div",K,[l("div",M," Rating ID: "+h(o.id),1),l("div",X,[l("span",{class:"material-icons",style:T({color:t.getRatingColor(o.stress_level)})},h(t.getRatingIcon(o.stress_level)),5)]),l("div",D,h(o.comment),1)])]),_:2},1024)]),_:2},1024))),128))])):B("",!0),t.isLoggedIn?B("",!0):(c(),p("div",N,[n(w,null,{default:g(()=>[n(v,null,{default:g(()=>[i[1]||(i[1]=l("div",{class:"text-h7"},"Please sign up or log in to be able to rate your location.",-1)),n(Q,{class:"q-gutter-sm w-100"},{default:g(()=>[n(A,{label:"Login",color:"primary",class:"col-6",to:"/profile"}),n(A,{label:"Signup",color:"secondary",outline:"",class:"col-6",to:"./signup"})]),_:1})]),_:1})]),_:1}),n(A,{class:"q-mt-xl text-primary",unelevated:"",to:"/",label:"Go Home","no-caps":""})]))],64)}const $=Z(F,[["render",z]]);export{$ as default};
