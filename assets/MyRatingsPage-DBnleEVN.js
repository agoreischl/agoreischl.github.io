import{Q as I,a as B}from"./QCard-Db_s-ORI.js";import{Q as A}from"./QBtn-BXVWwLck.js";import{Q as T}from"./QItem-D7dXRMkA.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as f,K as g,W as k,R as n,U as E,V as Z,Q as i,L as d,r as l,o as b,J as R,X as h,Y as L}from"./index-B_YnBPks.js";import"./QIcon-fDcLTqvb.js";import"./use-dark-CZYQkjtG.js";const S={setup(){const y=l([]),a=l([]),c=l(""),o=l([]),p=l([{username:"User",userId:c.value,email:"email@email.com",picture:"data:image/png;base64,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",token:"password"}]),C=l(null),s=l(""),m=async()=>{try{var e=await fetch(`https://vibemapbe.com/location/location/locations/user/${c.value}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.value}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.json();a.value=t,console.log(e)}catch(t){console.error("Error fetching data:",t)}};b(async()=>{s.value=localStorage.getItem("usertoken"),c.value=Number(localStorage.getItem("loggedInId")),await u(s.value),await m(),setTimeout(()=>{x()},1)});const u=async e=>{console.log(e);try{const t=await fetch("https://vibemapbe.com/auth/auth/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const r=await t.json();p.value[0]={...p.value[0],username:r.email,email:r.email,userId:r.id,token:e}}catch(t){C.value=t.message||"Failed to fetch user data"}};function x(){if(window.google&&window.google.maps){w();return}const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY",e.async=!0,e.defer=!0,e.onload=w,document.head.appendChild(e)}function w(){o.value.forEach((e,t)=>{const r=a[t],Q=new window.google.maps.Map(e,{center:{lat:r.latitude,lng:r.longitude},zoom:14,mapTypeControl:!1,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1});new window.google.maps.Marker({position:{lat:r.latitude,lng:r.longitude},map:Q,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#2C6E49",fillOpacity:1,strokeWeight:2,strokeColor:"#ffffff"}})})}function G(e){return["sentiment_very_dissatisfied","sentiment_dissatisfied","sentiment_satisfied","sentiment_very_satisfied"][e-1]||""}function H(e){return["red","orange","green","green-9"][e-1]||""}const v=l();return b(()=>{v.value=localStorage.getItem("isLoggedIn")}),{ratings:y,responses:a,mapElements:o,getRatingIcon:G,getRatingColor:H,isLoggedIn:v,loggedInId:c}}},D={key:0,class:"text-primary text-center q-pa-md flex flex-center w-100"},F={class:"rate-details"},K={class:"rate-date"},M={class:"rate"},X={class:"rate-reason"},z={key:1,class:"text-primary text-center q-pa-md flex flex-center w-100"};function J(y,a,c,o,p,C){return g(),f(E,null,[o.isLoggedIn?(g(),f("div",D,[a[0]||(a[0]=n("div",{class:"text-h6"},"My ratings",-1)),(g(!0),f(E,null,Z(o.responses,(s,m)=>(g(),R(I,{key:m,class:"myratings-card"},{default:d(()=>[i(B,{class:"myratings-card-inner"},{default:d(()=>[n("div",{class:"map-elem",ref_for:!0,ref:u=>o.mapElements[m]=u},null,512),n("div",F,[n("div",K," Rating ID: "+h(s.id),1),n("div",M,[n("span",{class:"material-icons",style:L({color:o.getRatingColor(s.stress_level)})},h(o.getRatingIcon(s.stress_level)),5)]),n("div",X,h(s.comment),1)])]),_:2},1024)]),_:2},1024))),128))])):k("",!0),o.isLoggedIn?k("",!0):(g(),f("div",z,[i(I,null,{default:d(()=>[i(B,null,{default:d(()=>[a[1]||(a[1]=n("div",{class:"text-h7"},"Please sign up or log in to be able to rate your location.",-1)),i(T,{class:"q-gutter-sm w-100"},{default:d(()=>[i(A,{label:"Login",color:"primary",class:"col-6",to:"/profile"}),i(A,{label:"Signup",color:"secondary",outline:"",class:"col-6",to:"./signup"})]),_:1})]),_:1})]),_:1}),i(A,{class:"q-mt-xl text-primary",unelevated:"",to:"/",label:"Go Home","no-caps":""})]))],64)}const j=V(S,[["render",J]]);export{j as default};
